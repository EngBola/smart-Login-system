regexEmail=/^([_a-z0-9]+[\._a-z0-9]*)(\+[a-z0-9]+)?@(([a-z0-9-]+\.)*[a-z]{2,4})$/gim,regexName=/^\w{3,10}\s?\w{0,5}\d?$/gim,regexPass=/^(?=.*\w).(?=.*\d).{8,20}$/;var curentPage,users,session={id:"",uName:"",uEmail:"",rDate:""},content=document.querySelector(".content");function routing(){if("loginPage"==curentPage){content.innerHTML='<h1 class="text-center t-color py-4">Smart Login System</h1> \n        <div class="login mx-5">\n            <input class="form-control mb-3" type="email" id="email" placeholder="Enter your email" autocomplete="off">\n            <input class="form-control mb-3" type="password" id="psw" placeholder="Enter your password"autocomplete="off">\n            <div class="text-danger text-center fs-6 errorMsg"></div>\n            <button class=" mybtn w-100 my-2 p-1 " id="loginBtn">Login</button>\n            <div class=" text-center">\n            <p class="py-3  text-white fw-semibold d-inline-block">Donâ€™t have an account?  </p><a class="signup text-white text-decoration-none" > SignUp</a>\n            </div>\n        </div>',n=document.getElementById("email"),t=document.getElementById("psw"),msg=document.querySelector(".errorMsg"),document.querySelector("#loginBtn").addEventListener("click",(function(){for(var e=0;e<users.length;e++){if(users[e].userEmail==n.value.toLowerCase()&&users[e].userPass==t.value){curentPage="homePage",beginSession(users[e]),routing();break}msg.innerHTML="email or password wrong"}})),document.querySelector(".signup").addEventListener("click",(function(){curentPage="registerPage",routing()}))}if("registerPage"==curentPage){content.innerHTML='<h1 class="text-center t-color py-4">Smart Login System</h1>\n        <h3 class="text-center text-success d-none">Successfull</h3>\n        <div class="signup mx-5 text-center">\n            <input class="form-control mt-3" type="text" id="username" placeholder="Enter your name" autocomplete="off">\n            <span id="nerr"></span>\n            <input class="form-control mt-3" type="email" id="email" placeholder="Enter your email" autocomplete="off">\n            <span id="eerr"></span>\n            <span id="derr"></span>\n            <input class="form-control mt-3" type="password" id="pws" placeholder="Enter your password" autocomplete="off">\n            <span id="perr"></span>\n            <button class=" mybtn w-100 my-3 p-1 " id="regBtn">Sign Up</button>\n            <div class=" text-center">\n            <p class="py-3 text-white fw-semibold d-inline-block">You have an account? </p> <a class="signin text-white text-decoration-none"> Signin</a>\n            </div>\n        </div>';var e=document.getElementById("username"),n=document.getElementById("email"),t=document.getElementById("pws"),s=document.querySelector("#regBtn"),r="",a="",o="",i="";function l(){if(""!=n.value){for(var e=0,t=0;t<users.length;t++)if(users[t].userEmail==n.value.toLowerCase()){e++;break}return e>0?(document.getElementById("derr").innerHTML="This Email is exist",i="This Email is exist"):(document.getElementById("derr").innerHTML="",i=!0)}}n.addEventListener("keyup",l),s.addEventListener("click",(function(){""!=e.value?(document.getElementById("nerr").innerHTML="",r=!0):r="invalid name",1!=regexEmail.test(n.value.toLowerCase())?o="invalid email":(document.getElementById("eerr").innerHTML="",o=!0),l(),1==regexPass.test(t.value)?(document.getElementById("perr").innerHTML="",a=!0):a="invalid password";var s=0;if(1!=r?document.getElementById("nerr").innerHTML=r:s++,1!=o?document.getElementById("eerr").innerHTML=o:s++,1!=i?document.getElementById("derr").innerHTML=i:s++,1!=a?document.getElementById("perr").innerHTML=a:s++,4==s){var c={userId:`${users.length+1}`,userName:e.value,userEmail:n.value.toLowerCase(),userPass:t.value,date:(new Date).toLocaleString()};users.push(c),localStorage.setItem("user",JSON.stringify(users)),routing(),document.querySelector("h3").classList.replace("d-none","d-block")}else document.querySelector("h3").classList.replace("d-block","d-none")})),document.querySelector(".signin").addEventListener("click",(function(){curentPage="loginPage",routing()}))}if("homePage"==curentPage){content.innerHTML=`<h1 class="text-center t-color py-4">WELCOME ${session.uName}</h1>\n                            <ul class="text-center">\n                                <li ><span class="badge text-bg-light"><i class="fa fa-user-large"></i> ${session.uName}</span></li>\n                                <li><span class="badge text-bg-info"><i class="fa fa-envelope"></i>  <a href="mailto:${session.uEmail}">${session.uEmail}</a></span></li>\n                                <li><span class="badge text-bg-warning"><i class="fa fa-clock-rotate-left"></i> ${session.rDate}</span></li>\n                            </ul>`;var c=document.querySelector("nav .btn-outline-warning");showNav(),c.addEventListener("click",logOut)}}function showNav(){document.querySelector("nav").classList.replace("d-none","d-block")}function logOut(){document.querySelector("nav").classList.replace("d-block","d-none"),sessionStorage.clear("session"),curentPage="loginPage",routing()}function beginSession(e){session={id:e.userId,uName:e.userName,uEmail:e.userEmail,rDate:e.date},sessionStorage.setItem("session",JSON.stringify(session))}users=null==localStorage.getItem("user")?[]:JSON.parse(localStorage.getItem("user")),null==sessionStorage.getItem("session")?(curentPage="loginPage",routing()):(session=JSON.parse(sessionStorage.getItem("session")),curentPage="homePage",routing());